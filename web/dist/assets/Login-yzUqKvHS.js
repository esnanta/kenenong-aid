import{r as p,j as e,u as A,f as P,g as X,C as $,a as J,b as Q,e as W,d as Y,L as _,B as Z,t as M}from"./app-Bl_wJ_hE.js";import{u as ee,a as se,o as re,b as te,s as F}from"./schemas-D9Z4gvzi.js";import{L as w,I as B}from"./label-BvEf3wqG.js";import{c as ae,P as ne,a as E,u as oe,b as L,C as ce}from"./index-CjnoExKc.js";import{u as ie}from"./index-D8_6ZWNL.js";import{u as de}from"./index-Br0iUmKJ.js";import{A as le}from"./AuthLayout-Dn3cS2-K.js";import"./rocket-DnruQECC.js";var j="Checkbox",[ue]=ae(j),[me,S]=ue(j);function pe(s){const{__scopeCheckbox:o,checked:t,children:l,defaultChecked:c,disabled:r,form:f,name:h,onCheckedChange:n,required:C,value:a="on",internal_do_not_use_render:i}=s,[u,b]=oe({prop:t,defaultProp:c??!1,onChange:n,caller:j}),[g,x]=p.useState(null),[v,d]=p.useState(null),m=p.useRef(!1),y=g?!!f||!!g.closest("form"):!0,N={checked:u,disabled:r,setChecked:b,control:g,setControl:x,name:h,form:f,value:a,hasConsumerStoppedPropagationRef:m,required:C,defaultChecked:k(c)?!1:c,isFormControl:y,bubbleInput:v,setBubbleInput:d};return e.jsx(me,{scope:o,...N,children:fe(i)?i(N):l})}var q="CheckboxTrigger",D=p.forwardRef(({__scopeCheckbox:s,onKeyDown:o,onClick:t,...l},c)=>{const{control:r,value:f,disabled:h,checked:n,required:C,setControl:a,setChecked:i,hasConsumerStoppedPropagationRef:u,isFormControl:b,bubbleInput:g}=S(q,s),x=A(c,a),v=p.useRef(n);return p.useEffect(()=>{const d=r==null?void 0:r.form;if(d){const m=()=>i(v.current);return d.addEventListener("reset",m),()=>d.removeEventListener("reset",m)}},[r,i]),e.jsx(E.button,{type:"button",role:"checkbox","aria-checked":k(n)?"mixed":n,"aria-required":C,"data-state":z(n),"data-disabled":h?"":void 0,disabled:h,value:f,...l,ref:x,onKeyDown:L(o,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:L(t,d=>{i(m=>k(m)?!0:!m),g&&b&&(u.current=d.isPropagationStopped(),u.current||d.stopPropagation())})})});D.displayName=q;var I=p.forwardRef((s,o)=>{const{__scopeCheckbox:t,name:l,checked:c,defaultChecked:r,required:f,disabled:h,value:n,onCheckedChange:C,form:a,...i}=s;return e.jsx(pe,{__scopeCheckbox:t,checked:c,defaultChecked:r,disabled:h,required:f,onCheckedChange:C,name:l,form:a,value:n,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(D,{...i,ref:o,__scopeCheckbox:t}),u&&e.jsx(U,{__scopeCheckbox:t})]})})});I.displayName=j;var T="CheckboxIndicator",O=p.forwardRef((s,o)=>{const{__scopeCheckbox:t,forceMount:l,...c}=s,r=S(T,t);return e.jsx(ne,{present:l||k(r.checked)||r.checked===!0,children:e.jsx(E.span,{"data-state":z(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:o,style:{pointerEvents:"none",...s.style}})})});O.displayName=T;var H="CheckboxBubbleInput",U=p.forwardRef(({__scopeCheckbox:s,...o},t)=>{const{control:l,hasConsumerStoppedPropagationRef:c,checked:r,defaultChecked:f,required:h,disabled:n,name:C,value:a,form:i,bubbleInput:u,setBubbleInput:b}=S(H,s),g=A(t,b),x=ie(r),v=de(l);p.useEffect(()=>{const m=u;if(!m)return;const y=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(y,"checked").set,K=!c.current;if(x!==r&&R){const V=new Event("click",{bubbles:K});m.indeterminate=k(r),R.call(m,k(r)?!1:r),m.dispatchEvent(V)}},[u,x,r,c]);const d=p.useRef(k(r)?!1:r);return e.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??d.current,required:h,disabled:n,name:C,value:a,form:i,...o,tabIndex:-1,ref:g,style:{...o.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});U.displayName=H;function fe(s){return typeof s=="function"}function k(s){return s==="indeterminate"}function z(s){return k(s)?"indeterminate":s?"checked":"unchecked"}const G=p.forwardRef(({className:s,...o},t)=>e.jsx(I,{ref:t,className:P("grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...o,children:e.jsx(O,{className:P("grid place-content-center text-current"),children:e.jsx(ce,{className:"h-4 w-4"})})}));G.displayName=I.displayName;const he=re({username:F().min(1,"Username is required"),password:F().min(1,"Password is required"),rememberMe:te().default(!1)});function Ne({model:s,errors:o}){var i,u;const t=X({username:(s==null?void 0:s.username)||"",password:"",rememberMe:!1}),{register:l,handleSubmit:c,watch:r,setValue:f,formState:{errors:h,isSubmitting:n}}=ee({resolver:se(he),defaultValues:{username:(s==null?void 0:s.username)||"",password:"",rememberMe:!1}}),C=b=>{t.post("/auth/login",{data:b,onError:g=>{Object.values(g).forEach(x=>{Array.isArray(x)?x.forEach(v=>M.error(v)):M.error(x)})}})},a={...h,...o};return e.jsx(le,{children:e.jsxs($,{className:"border-0 shadow-none",children:[e.jsxs(J,{className:"space-y-1 px-0",children:[e.jsx(Q,{className:"text-2xl font-semibold tracking-tight",children:"Sign in"}),e.jsx(W,{className:"text-base",children:"Enter your credentials to access your account"})]}),e.jsxs(Y,{className:"px-0",children:[e.jsxs("form",{onSubmit:c(C),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"username",className:"text-sm font-medium",children:"Username"}),e.jsx(B,{id:"username",type:"text",...l("username"),className:a.username?"border-destructive":"",disabled:n||t.processing,autoFocus:!0,placeholder:"Enter your username"}),a.username&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:typeof a.username=="string"?a.username:((i=a.username)==null?void 0:i.message)||"Invalid username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(_,{href:"/auth/forgot-password",className:"text-sm text-primary hover:underline font-medium",children:"Forgot password?"})]}),e.jsx(B,{id:"password",type:"password",...l("password"),className:a.password?"border-destructive":"",disabled:n||t.processing,placeholder:"Enter your password"}),a.password&&e.jsx("p",{className:"text-sm text-destructive font-medium",children:typeof a.password=="string"?a.password:((u=a.password)==null?void 0:u.message)||"Invalid password"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"rememberMe",checked:r("rememberMe"),onCheckedChange:b=>{f("rememberMe",b),t.setData("rememberMe",b)}}),e.jsx(w,{htmlFor:"rememberMe",className:"text-sm font-normal cursor-pointer leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Remember me"})]}),e.jsx(Z,{type:"submit",variant:"default",className:"w-full",disabled:n||t.processing,children:n||t.processing?"Signing in...":"Sign in"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Don't have an account? "}),e.jsx(_,{href:"/auth/register",className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})]})})}export{Ne as default};
