import{c as q,g as J,r as j,j as e,H as Q,L as S,B as l,C as W,a as Z,b as ee,e as se,d as re,i as g,t as ae}from"./app-BLAu0s-k.js";import{D as te,a as le,b as ie,d as ce,e as ne,f as de,g as v,S as oe}from"./DashboardLayout-lqqN-nb-.js";import{I as k}from"./input-DhAMWrKR.js";import{L as y}from"./label-7NtcvhHA.js";import{T as me,a as he,b as w,c as P,d as xe,e as c}from"./table-DAQHUFWq.js";import{B}from"./badge-NTSI7XBk.js";import{S as ue,a as je,b as ge,c as pe,d as D}from"./select-DUzayBVp.js";import{P as fe,C as ve,F as H,E as Ne,T as ye,A as be,a as _e,b as Ce,c as Se,d as ke,e as we,f as De,g as Ae,h as Te,i as Fe,j as Ve}from"./alert-dialog-ICCQbimj.js";import{X as Ee}from"./Logo-BJkCVtS2.js";import{S as Ie}from"./square-pen-BWbyF03q.js";import"./index-DfJ-yVqU.js";import"./index-Dpf8Yrbs.js";import"./index-CAGsf3C7.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Le=q("circle-check",ze);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Me=q("circle-x",Ue);function We({users:b,pagination:t,filters:a,sort:n}){const{props:_}=J(),[d,A]=j.useState((a==null?void 0:a.search)||""),[o,T]=j.useState((a==null?void 0:a.email_verified)||""),[m,F]=j.useState((a==null?void 0:a.date_from)||""),[h,V]=j.useState((a==null?void 0:a.date_to)||""),[E,C]=j.useState(null),[r,p]=j.useState({id:!0,name:!0,email:!0,emailVerified:!0,createdAt:!0,actions:!0}),x=(n==null?void 0:n.sort_by)||"created_at",u=(n==null?void 0:n.sort_order)||"desc",O=s=>{const i=x===s&&u==="asc"?"desc":"asc";g.get("/users",{...a,search:d,email_verified:o,date_from:m,date_to:h,sort_by:s,sort_order:i,page:1},{preserveState:!0})},I=()=>{g.get("/users",{search:d,email_verified:o,date_from:m,date_to:h,sort_by:x,sort_order:u,page:1},{preserveState:!0})},$=()=>{A(""),T(""),F(""),V(""),g.get("/users",{sort_by:x,sort_order:u,page:1},{preserveState:!0})},R=s=>{var U,M;const i=(U=document.querySelector('meta[name="csrf-token"]'))==null?void 0:U.getAttribute("content"),z=(M=document.querySelector('meta[name="csrf-param"]'))==null?void 0:M.getAttribute("content"),N=i||_.csrfToken,L=z||_.csrfParam;if(!N||!L){ae.error("CSRF token missing. Please refresh the page.");return}const G={[L]:N};g.post(`/users/${s}/delete`,G,{onSuccess:()=>{C(null)}})},K=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",X=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",f=({column:s,children:i})=>{const N=x===s?u==="asc"?e.jsx(Te,{className:"ml-2 h-4 w-4"}):e.jsx(Fe,{className:"ml-2 h-4 w-4"}):e.jsx(Ve,{className:"ml-2 h-4 w-4 opacity-50"});return e.jsx(P,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>O(s),children:e.jsxs("div",{className:"flex items-center",children:[i,N]})})},Y=d||o||m||h;return e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Users | Yii2 - Modern Starter Kit"}),e.jsxs(te,{user:_.user,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your users and their permissions"})]}),e.jsx(S,{href:"/users/create",children:e.jsxs(l,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),e.jsxs(W,{children:[e.jsx(Z,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Users List"}),e.jsx(se,{children:"A list of all users in your system"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Columns"]})}),e.jsxs(ce,{align:"end",className:"w-48",children:[e.jsx(ne,{children:"Toggle Columns"}),e.jsx(de,{}),e.jsx(v,{checked:r.id,onCheckedChange:s=>p({...r,id:s}),children:"ID"}),e.jsx(v,{checked:r.name,onCheckedChange:s=>p({...r,name:s}),children:"Name"}),e.jsx(v,{checked:r.email,onCheckedChange:s=>p({...r,email:s}),children:"Email"}),e.jsx(v,{checked:r.emailVerified,onCheckedChange:s=>p({...r,emailVerified:s}),children:"Email Verified"}),e.jsx(v,{checked:r.createdAt,onCheckedChange:s=>p({...r,createdAt:s}),children:"Created At"})]})]})})]})}),e.jsxs(re,{children:[e.jsxs("div",{className:"space-y-4 mb-6 p-4 border rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-semibold",children:"Filters"})]}),Y&&e.jsxs(l,{variant:"ghost",size:"sm",onClick:$,children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Clear All"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(k,{id:"search",type:"search",placeholder:"Name or email...",value:d,onChange:s=>A(s.target.value),className:"pl-9",onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),I())}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"email-verified",children:"Email Status"}),e.jsxs(ue,{value:o||"all",onValueChange:s=>T(s==="all"?"":s),children:[e.jsx(je,{id:"email-verified",children:e.jsx(ge,{placeholder:"All"})}),e.jsxs(pe,{children:[e.jsx(D,{value:"all",children:"All"}),e.jsx(D,{value:"verified",children:"Verified"}),e.jsx(D,{value:"unverified",children:"Unverified"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"date-from",children:"Date From"}),e.jsx(k,{id:"date-from",type:"date",value:m,onChange:s=>F(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"date-to",children:"Date To"}),e.jsx(k,{id:"date-to",type:"date",value:h,onChange:s=>V(s.target.value)})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(l,{onClick:I,children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Apply Filters"]})})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(me,{children:[e.jsx(he,{children:e.jsxs(w,{children:[r.id&&e.jsx(f,{column:"id",children:"ID"}),r.name&&e.jsx(f,{column:"name",children:"Name"}),r.email&&e.jsx(f,{column:"email",children:"Email"}),r.emailVerified&&e.jsx(f,{column:"email_verified_at",children:"Email Verified"}),r.createdAt&&e.jsx(f,{column:"created_at",children:"Created At"}),r.actions&&e.jsx(P,{className:"text-right",children:"Actions"})]})}),e.jsx(xe,{children:b&&b.length>0?b.map(s=>{var i;return e.jsxs(w,{children:[r.id&&e.jsx(c,{className:"font-medium",children:s.id}),r.name&&e.jsx(c,{className:"font-medium",children:s.name}),r.email&&e.jsx(c,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:s.email})})}),r.emailVerified&&e.jsx(c,{children:s.email_verified_at?e.jsxs(B,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-400 dark:border-green-800",children:[e.jsx(Le,{className:"mr-1 h-3 w-3"}),"Verified"]}):e.jsxs(B,{variant:"outline",className:"bg-gray-50 text-gray-700 border-gray-200 dark:bg-gray-950 dark:text-gray-400 dark:border-gray-800",children:[e.jsx(Me,{className:"mr-1 h-3 w-3"}),"Not Verified"]})}),r.createdAt&&e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:K(s.created_at)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:(i=X(s.created_at).split(",")[1])==null?void 0:i.trim()})]})}),r.actions&&e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(S,{href:`/users/${s.id}`,children:e.jsx(l,{variant:"ghost",size:"sm",title:"View",children:e.jsx(Ne,{className:"h-4 w-4"})})}),e.jsx(S,{href:`/users/${s.id}/edit`,children:e.jsx(l,{variant:"ghost",size:"sm",title:"Edit",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>C(s.id),title:"Delete",children:e.jsx(ye,{className:"h-4 w-4 text-destructive"})})]})})]},s.id)}):e.jsx(w,{children:e.jsx(c,{colSpan:Object.values(r).filter(Boolean).length,className:"text-center text-muted-foreground py-8",children:"No users found"})})})]})}),t&&t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(t.current_page-1)*t.per_page+1," to ",Math.min(t.current_page*t.per_page,t.total)," of ",t.total," users"]}),e.jsxs("div",{className:"flex gap-2",children:[t.current_page>1&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>g.get("/users",{...a,search:d,email_verified:o,date_from:m,date_to:h,sort_by:x,sort_order:u,page:t.current_page-1},{preserveState:!0}),children:"Previous"}),t.current_page<t.last_page&&e.jsx(l,{variant:"outline",size:"sm",onClick:()=>g.get("/users",{...a,search:d,email_verified:o,date_from:m,date_to:h,sort_by:x,sort_order:u,page:t.current_page+1},{preserveState:!0}),children:"Next"})]})]})]})]})]}),e.jsx(be,{open:E!==null,onOpenChange:()=>C(null),children:e.jsxs(_e,{children:[e.jsxs(Ce,{children:[e.jsx(Se,{children:"Are you sure?"}),e.jsx(ke,{children:"This action will delete the user. This action cannot be undone."})]}),e.jsxs(we,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(Ae,{onClick:()=>R(E),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})]})}export{We as default};
