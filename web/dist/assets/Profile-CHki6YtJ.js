import{g as v,h as N,j as e,H as C,C as P,a as F,b as E,e as k,d as A,B as D,i as I,t as o}from"./app-BLAu0s-k.js";import{D as H}from"./DashboardLayout-lqqN-nb-.js";import{I as p}from"./input-DhAMWrKR.js";import{L as h}from"./label-7NtcvhHA.js";import{u as L,a as T,o as q,s as x}from"./schemas-BlBNX1Er.js";import"./Logo-BJkCVtS2.js";import"./index-DfJ-yVqU.js";import"./index-Dpf8Yrbs.js";const B=q({name:x().min(3,"Name must be at least 3 characters"),email:x().email("Invalid email address")});function $({user:a}){const{props:i}=v(),s=N({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||""}),{register:m,handleSubmit:j,formState:{errors:t,isSubmitting:r}}=L({resolver:T(B),defaultValues:{name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||""}}),u=g=>{var d,f;const c=i.csrfToken||((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content")),l=i.csrfParam||((f=document.querySelector('meta[name="csrf-param"]'))==null?void 0:f.getAttribute("content")),b={...g,...c&&l?{[l]:c}:{}};I.put("/dashboard/profile",b,{onSuccess:()=>{o.success("Profile updated successfully")},onError:y=>{Object.values(y).forEach(n=>{Array.isArray(n)?n.forEach(S=>o.error(S)):o.error(n)})}})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Profile | Yii2 - Modern Starter Kit"}),e.jsx(H,{user:i.user,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),e.jsxs(P,{children:[e.jsxs(F,{children:[e.jsx(E,{children:"Profile Information"}),e.jsx(k,{children:"Update your account's profile information"})]}),e.jsx(A,{children:e.jsxs("form",{onSubmit:j(u),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"name",children:"Name"}),e.jsx(p,{id:"name",...m("name"),disabled:r||s.processing}),t.name&&e.jsx("p",{className:"text-sm text-destructive",children:t.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(p,{id:"email",type:"email",...m("email"),disabled:r||s.processing}),t.email&&e.jsx("p",{className:"text-sm text-destructive",children:t.email.message})]}),e.jsx(D,{type:"submit",disabled:r||s.processing,children:r||s.processing?"Saving...":"Save Changes"})]})})]})]})})]})}export{$ as default};
